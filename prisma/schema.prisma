generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ResearchStatus {
  IN_PROGRESS
  COMPLETED
}

model Research {
  id          String         @id @default(cuid())
  title       String
  description String?
  contentHtml String?        @db.Text
  imageUrl    String?
  published   Boolean        @default(false)
  status      ResearchStatus @default(IN_PROGRESS)
  startDate   DateTime?
  endDate     DateTime?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model News {
  id          String   @id @default(cuid())
  title       String
  description String
  contentHtml String?  @db.Text
  imageUrl    String?
  publishedAt DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

enum Role {
  PROFESSOR
  CURRENT
  ALUMNI
}

model Person {
  id          Int      @id @default(autoincrement())
  name        String
  position    String
  description String?  @db.Text
  image       String?
  email       String   @unique
  degree      String?
  role        Role
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model HomePageContent {
  id             Int    @id @default(1)
  heroTitle      String
  heroSubtitle   String
  heroParagraph  String @db.Text
  aboutTitle     String @db.Text
  aboutParagraph String @db.Text
  newsTitle      String
  newsSubtitle   String
}

model SliderImage {
  id        Int      @id @default(autoincrement())
  imageUrl  String
  altText   String?
  order     Int      @default(0)
  createdAt DateTime @default(now())
}

model Asset {
  id           String         @id @default(cuid())
  url          String
  originalName String?
  mime         String?
  size         Int?
  // 글 정보, 글 번호
  ownerType    AssetOwnerType
  ownerId      String
  tag          String?
  createdAt    DateTime       @default(now())

  @@index([ownerType, ownerId])
}

enum AssetOwnerType {
  RESEARCH
  NEWS
}

model Contact {
  id          Int      @id @default(autoincrement())
  labNameKo   String
  labNameEn   String
  addressKo   String
  addressEn   String
  mapEmbedUrl String
  updatedAt   DateTime @updatedAt
}

model AboutContent {
  id        Int      @id @default(autoincrement())
  page      String   @unique // "about", "home" 등
  data      Json // 페이지 컨텐츠 JSON
  updatedAt DateTime @updatedAt
}

model Publication {
  id        Int      @id @default(autoincrement())
  title     String
  authors   String // "SON HYUN BIN"
  venue     String? // "Nature", "ICML 2025" 등
  year      Int
  month     Int? // 1~12
  url       String? // 외부 논문 링크
  pdfUrl    String? // 직접 PDF 링크(옵션)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([year], map: "idx_publication_year")
}

model BoardTab {
  id          Int          @id @default(autoincrement())
  name        String        @unique           // 탭 이름 (예: 공지사항)
  slug        String        @unique           // URL-friendly 이름 (예: notice)
  description String?       @db.Text
  order       Int           @default(0)       // 탭 순서 제어용
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt

  posts       BoardPost[]                      // 1:N 관계
}

model BoardPost {
  id          String       @id @default(cuid())
  title       String
  description String
  contentHtml String?      @db.Text
  imageUrl    String?
  published   Boolean      @default(false)
  publishedAt DateTime? 
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  tabId       Int
  tab         BoardTab     @relation(fields: [tabId], references: [id])
}